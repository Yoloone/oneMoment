(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{170:function(e,t,n){e.exports=n(348)},179:function(e,t,n){},180:function(e,t,n){},190:function(e,t,n){},242:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){},265:function(e,t,n){},347:function(e,t,n){},348:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),o=n.n(c),i=n(22),u=(n(179),n(14)),s=n(15),l=n(17),m=n(16),h=n(18),d=n(29),p=n(55),f=n(20),b=(n(180),n(13)),E=n(28),O=function(e){return"/api/stream/date/".concat(e)},j=function(e){return"/api/column/".concat(e,"/posts?count=20")},g=function(){return"/api/columns"},v=function(){return"/api/auth_authors/rec"},y=function(){return"/api/auth_authors/all?count=20"},I=function(e){return"/api/post/".concat(e)},A=function(e){return"/api/post/".concat(e,"/popular_comments")},C=function(e){return"/api/author/".concat(e,"/posts")},T=n(166),_=new Headers({Accept:"application/json","Content-Type":"application/json"}),S=function(e,t){return 200===t.status?t.json():(console.error("Request failed. Url = ".concat(e)),Promise.reject({error:{message:"Request ".concat(e," failed due to the sever err")}}))},F=function(e,t){return(n=e,fetch(n,{method:"GET",credentials:"include",headers:_}).then(function(e){return S(n,e)}).catch(function(e){return console.error(e),Promise.reject({error:{message:"Request ".concat(n," failed due to the ").concat(e)}})})).then(function(e){return L(e,t)});var n},L=function(e,t){var n,a=t.id,r=t.name,c={},o=[];return e=e[r],Array.isArray(e)?(e.forEach(function(e){c[e[a]]=e,o.push(e[a])}),n={},Object(E.a)(n,r,c),Object(E.a)(n,"ids",o),n):e},k={name:"columns",id:"id"},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.data&&t.data[k.name]?Object(b.a)({},e,t.data[k.name]):e},D="FETCH_COLUMNS_REQUEST",R="FETCH_COLUMNS_SUCCESS",U="FETCH_COLUMNS_FAILURE",H={loadColumns:function(){return function(e,t){var n=g();return e(N(n))}}},N=function(e){return Object(E.a)({},"FETCH_DATA",{requestURL:e,schema:k,types:[D,R,U]})},M={isFetching:!1,columnIds:[]},P=function(e){return e.showColumns.columnIds.map(function(t){return e.entities.columns[t]})},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(b.a)({},e,{isFetching:!0});case R:return Object(b.a)({},e,{isFetching:!1,columnIds:t.data.ids});case U:return Object(b.a)({},e,{isFetching:!1});default:return e}},Q=(n(181),n(165)),Y=(n(79),n(53)),z=(n(349),n(164)),G=(n(101),n(9)),J=(n(190),n(11)),x=n.n(J),B=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1},n.showDrawer=function(){n.setState({visible:!0})},n.onClose=function(){n.setState({visible:!1})},n.back=function(){window.history.back()},n.onChange=function(e,t){e&&n.props.changeDate(e._d)},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"disabledDate",value:function(e){return e&&e>x()().endOf("day")}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.type,a=e.isLike,c=e.changeLikes,o=e.changeDate;return r.a.createElement("div",{className:"header-panel"},r.a.createElement("div",{className:"header-icon"},r.a.createElement(G.a,{type:n,onClick:"menu"===n?this.showDrawer:"arrow-left"===n?this.back:""})),r.a.createElement("div",{className:"header-title"},o?r.a.createElement(z.a,{format:"YYYY-MM-DD",onChange:this.onChange,disabledDate:this.disabledDate}):t),r.a.createElement("div",{className:"header-extra"},c?r.a.createElement(G.a,{type:"heart",theme:a?"filled":"outlined",onClick:c}):""),r.a.createElement(Q.a,{placement:"left",closable:!1,onClose:this.onClose,visible:this.state.visible},r.a.createElement("div",null,r.a.createElement(Y.a,{size:"large",icon:"user",shape:"circle"})," \xa0 \u767b\u5f55"),r.a.createElement("ul",{className:"drawer-list"},r.a.createElement("li",null,r.a.createElement(d.b,{to:"/"},r.a.createElement(G.a,{type:"home",theme:"twoTone",twoToneColor:"#48c7ce"}),"\u4eca\u65e5\u4e00\u523b")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/historyArticles"},r.a.createElement(G.a,{type:"file",theme:"twoTone",twoToneColor:"#65c791"}),"\u5f80\u671f\u5185\u5bb9")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/hotAuthors"},r.a.createElement(G.a,{type:"edit",theme:"twoTone",twoToneColor:"#ef9d56"}),"\u70ed\u95e8\u4f5c\u8005")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/column"},r.a.createElement(G.a,{type:"project",theme:"twoTone",twoToneColor:"#5295ce"}),"\u680f\u76ee\u6d4f\u89c8")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/like"},r.a.createElement(G.a,{type:"heart",theme:"twoTone",twoToneColor:"#fb7677"}),"\u6211\u7684\u559c\u6b22")))))}}]),t}(a.Component),W=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.actions.loadColumns)()}},{key:"render",value:function(){var e=this.props.columns;return r.a.createElement("div",null,r.a.createElement(B,{title:"\u680f\u76ee\u6d4f\u89c8",type:"menu"}),r.a.createElement("div",{className:"columns__container"},e.map(function(e){return r.a.createElement("div",{className:"columns__items",key:e.id},r.a.createElement("img",{src:e.icon}),r.a.createElement("h3",null,r.a.createElement(d.b,{to:"/columnArticle/".concat(e.id)},e.name)),r.a.createElement("h4",null,e.description))})))}}]),t}(a.Component),K=Object(i.b)(function(e){return{columns:P(e)}},function(e){return{actions:Object(f.b)(H,e)}})(W),V=(n(89),n(33)),X=(n(242),function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.loadArticles)()}},{key:"render",value:function(){var e=this.props,t=e.loading,n=e.articles,a=e.date,c=a?a.toDateString():" ";return r.a.createElement("div",null,r.a.createElement(V.a,{loading:t,header:c,dataSource:n,itemLayout:"vertical",renderItem:function(e){return r.a.createElement(V.a.Item,{key:e.id},e.column?r.a.createElement("span",{className:"listItem-tag"},e.column):"",r.a.createElement("h4",{className:"listItem-title"},r.a.createElement(d.b,{to:"/artileDetail/".concat(e.id)},e.title)),10001===e.display_style?r.a.createElement("div",{className:"listItem-content"},r.a.createElement("div",{className:"listItem-abstract"},e.abstract)):"",10002===e.display_style?r.a.createElement("div",{className:"listItem-content"},r.a.createElement("div",{className:"listItem-abstract"},e.abstract),e.thumbs.length>0?r.a.createElement("div",null,r.a.createElement("img",{src:e.thumbs[0].medium.url})):""):"",10003===e.display_style?r.a.createElement("div",{className:"listItem-content"},e.thumbs.map(function(e){return e?r.a.createElement("div",{key:e.id},r.a.createElement("img",{src:e.small.url})):""})):"")}}))}}]),t}(a.Component)),Z={name:"posts",id:"id"},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.data&&t.data[Z.name]?Object(b.a)({},e,t.data[Z.name]):e},ee="TODAY/FETCH_ARTICLES_REQUEST",te="TODAY/FETCH_ARTICLES_SUCCESS",ne="TODAY/FETCH_ARTICLES_FAILURE",ae="SET_COLUMNID",re="SET_DATE",ce={loadArticles:function(e){return function(t,n){t({type:re,date:e});var a=O(ie(e));return t(oe(a))}},loadColumnArticles:function(e){return function(t,n){t({type:ae,columnId:e});var a=j(e);return t(oe(a))}},setColumnID:function(e){return{type:ae,columnId:e}}},oe=function(e){return Object(E.a)({},"FETCH_DATA",{requestURL:e,types:[ee,te,ne],schema:Z})},ie=function(e){var t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate();return t+"-"+(n>9?n:"0"+n)+"-"+(a>9?a:"0"+a)},ue={isFetching:!1,articleIds:[],columnId:"",date:new Date},se=function(e){return e.showArticles.articleIds.map(function(t){return e.entities.articles[t]})},le=function(e){return e.showArticles.date},me=function(e){return e.showArticles.isFetching},he=function(e){return e.showArticles.columnId&&e.entities.columns[e.showArticles.columnId]?e.entities.columns[e.showArticles.columnId].name:""},de=function(e){var t=JSON.parse(localStorage.getItem(e.login.username)),n=[];if(t)for(var a in t.likeIds)n.push(e.entities.articles[a]);return n},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(b.a)({},e,{isFetching:!0});case te:return Object(b.a)({},e,{isFetching:!1,articleIds:t.data.ids});case ne:return Object(b.a)({},e,{isFetching:!1});case ae:return Object(b.a)({},e,{columnId:t.columnId});case re:return Object(b.a)({},e,{date:t.date});default:return e}},fe=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.articles,n=e.isFetching,a=e.date,c=e.actions.loadArticles;return r.a.createElement("div",null,r.a.createElement(B,{title:"\u4eca\u65e5\u4e00\u523b",type:"menu"}),r.a.createElement(X,{loading:n,articles:t,loadArticles:function(){return c(new Date)},date:a}))}}]),t}(a.Component),be=Object(i.b)(function(e){return{articles:se(e),date:le(e),isFetching:me(e)}},function(e){return{actions:Object(f.b)(ce,e)}})(fe),Ee=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.articles,n=e.isFetching,a=e.actions.loadArticles,c=new Date;return c.setDate(c.getDate()-1),r.a.createElement("div",null,r.a.createElement(B,{title:"\u5f80\u671f\u5185\u5bb9",type:"menu",changeDate:a}),r.a.createElement(X,{loading:n,articles:t,loadArticles:function(){return a(c)},date:this.props.date}))}}]),t}(a.Component),Oe=Object(i.b)(function(e){return{articles:se(e),date:le(e),isFetching:me(e)}},function(e){return{actions:Object(f.b)(ce,e)}})(Ee),je=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.articles,n=e.isFetching;return r.a.createElement("div",null,r.a.createElement(B,{title:"\u6211\u7684\u559c\u6b22",type:"menu"}),r.a.createElement(X,{loading:n,articles:t,loadArticles:function(){}}))}}]),t}(a.Component),ge=Object(i.b)(function(e){return{articles:de(e),isFetching:me(e)}},null)(je),ve=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this.props;(0,e.actions.setColumnID)(e.match.params.columnId)}},{key:"render",value:function(){var e=this.props,t=e.articles,n=e.isFetching,a=e.columnName,c=e.actions.loadColumnArticles,o=e.match.params.columnId;return r.a.createElement("div",null,r.a.createElement(B,{title:a,type:"arrow-left"}),r.a.createElement(X,{loading:n,articles:t,loadArticles:function(){return c(o)}}))}}]),t}(a.Component),ye=Object(i.b)(function(e){return{articles:se(e),columnName:he(e),isFetching:me(e)}},function(e){return{actions:Object(f.b)(ce,e)}})(ve),Ie=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.postId;(0,e.loadArticleDetail)(t)}},{key:"render",value:function(){var e=this.props.content;return r.a.createElement("div",{className:"wrap",dangerouslySetInnerHTML:{__html:e}})}}]),t}(a.Component),Ae=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.postId;(0,e.loadArticleComments)(t)}},{key:"render",value:function(){var e=this.props.comments;return r.a.createElement(V.a,{header:"\u6587\u7ae0\u8bc4\u8bba(".concat(e.length,")"),dataSource:e,itemLayout:"horizontal",renderItem:function(e){return r.a.createElement(V.a.Item,{key:e.id},r.a.createElement(V.a.Item.Meta,{avatar:r.a.createElement(Y.a,{src:e.author.avatar,size:"default"}),title:r.a.createElement("a",{href:"https://ant.design"},e.author.name),description:e.content}),r.a.createElement("div",null,e.created_time.split(/\s+/)[0]))}})}}]),t}(a.Component),Ce=(n(263),{name:"comments",id:"id"}),Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.data&&t.data[Ce.name]?Object(b.a)({},e,t.data[Ce.name]):e},_e="FETCH_ARTICLE_DETAIL_REQUEST",Se="FETCH_ARTICLE_DETAIL_SUCCESS",Fe="FETCH_ARTICLE_DETAIL_FAILURE",Le="FETCH_ARTICLE_DETAIL_REQUEST",ke="FETCH_ARTICLE_COMMENTS_SUCCESS",we="FETCH_ARTICLE_COMMENTS_FAILURE",De="CHANGE_IS_LIKE",Re={loadArticleDetail:function(e){return function(t,n){t(Ne(e));var a=I(e);return t(Ue(a))}},loadArticleComments:function(e){return function(t,n){var a=A(e);return t(He(a))}},changeLikes:function(e){return Ne(e,!0)}},Ue=function(e){return Object(E.a)({},"FETCH_DATA",{requestURL:e,types:[_e,Se,Fe],schema:{name:"content"}})},He=function(e){return Object(E.a)({},"FETCH_DATA",{requestURL:e,types:[Le,ke,we],schema:Ce})},Ne=function(e,t){var n=localStorage.getItem("user"),a=!1;if(n){var r=JSON.parse(localStorage.getItem(n));a=!!r.likeIds[e],t&&(a?delete r.likeIds[e]:r.likeIds[e]=!0,localStorage.setItem(n,JSON.stringify(r)),a=!a)}return{type:De,isLike:a}},Me={isFetching:!1,commentIds:[],content:"",isLike:!1},Pe=function(e){return e.details.content},qe=function(e){return e.details.commentIds.map(function(t){return e.entities.comments[t]})},Qe=function(e){return e.details.isLike},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _e:case Le:return Object(b.a)({},e,{isFetching:!0});case Se:return Object(b.a)({},e,{isFetching:!1,content:t.data});case ke:return Object(b.a)({},e,{isFetching:!1,commentIds:t.data.ids});case Fe:case we:return Object(b.a)({},e,{isFetching:!1});case De:return Object(b.a)({},e,{isLike:t.isLike});default:return e}},ze=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.content,n=e.comments,a=e.isLike,c=e.actions,o=c.loadArticleDetail,i=c.loadArticleComments,u=c.changeLikes,s=e.match.params.postId;return r.a.createElement("div",{id:"detail"},r.a.createElement(B,{title:"\u6587\u7ae0\u8be6\u60c5",type:"arrow-left",isLike:a,changeLikes:function(){u(s)}}),r.a.createElement(Ie,{content:t,loadArticleDetail:o,postId:s}),r.a.createElement(Ae,{comments:n,loadArticleComments:i,postId:s}))}}]),t}(a.Component),Ge=Object(i.b)(function(e){return{content:Pe(e),comments:qe(e),isLike:Qe(e)}},function(e){return{actions:Object(f.b)(Re,e)}})(ze),Je=(n(264),function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.loadAuthors()}},{key:"render",value:function(){var e=this.props,t=e.authors,n=e.header,a=e.loading;return r.a.createElement("div",null,r.a.createElement(V.a,{loading:a,header:n,dataSource:t,itemLayout:"horizontal",renderItem:function(e){return r.a.createElement(V.a.Item,{key:e.id},r.a.createElement(Y.a,{src:e.avatar,size:"large"}),r.a.createElement(V.a.Item.Meta,{title:r.a.createElement(d.b,{to:"/authorProfile/".concat(e.id)},e.name),description:e.editor_notes}))}}))}}]),t}(a.Component)),xe={name:"authors",id:"id"},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.data&&t.data[xe.name]?Object(b.a)({},e,t.data[xe.name]):e},We="FETCH_REC_AUTHORS_REQUEST",Ke="FETCH_REC_AUTHORS_SUCCESS",Ve="FETCH_REC_AUTHORS_FAILURE",Xe="FETCH_HOT_AUTHORS_REQUEST",Ze="FETCH_HOT_AUTHORS_SUCCESS",$e="FETCH_HOT_AUTHORS_FAILURE",et={loadRecAuthors:function(){return function(e,t){var n=v();return e(tt(n))}},loadHotAuthors:function(){return function(e,t){var n=y();return e(nt(n))}}},tt=function(e){return Object(E.a)({},"FETCH_DATA",{requestURL:e,schema:xe,types:[We,Ke,Ve]})},nt=function(e){return Object(E.a)({},"FETCH_DATA",{requestURL:e,schema:xe,types:[Xe,Ze,$e]})},at={isFetching:!1,recIds:[],hotIds:[]},rt=function(e){return e.hotAuthors.recIds.map(function(t){return e.entities.authors[t]})},ct=function(e){return e.hotAuthors.hotIds.map(function(t){return e.entities.authors[t]})},ot=function(e){return e.hotAuthors.isFetching},it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case We:case Xe:return Object(b.a)({},e,{isFetching:!0});case Ke:return Object(b.a)({},e,{isFetching:!1,recIds:t.data.ids});case Ze:return Object(b.a)({},e,{isFetching:!1,hotIds:t.data.ids});case Ve:case $e:return Object(b.a)({},e,{isFetching:!1});default:return e}},ut=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.recAuthors,n=e.hotAuthors,a=e.isFetching,c=e.actions,o=c.loadRecAuthors,i=c.loadHotAuthors;return r.a.createElement("div",{id:"hotAuthor"},r.a.createElement(B,{title:"\u70ed\u95e8\u4f5c\u8005",type:"menu"}),r.a.createElement(Je,{loading:a,authors:t,loadAuthors:o,header:"\u672c\u5468\u63a8\u8350"}),r.a.createElement(Je,{loading:a,authors:n,loadAuthors:i,header:"\u70ed\u95e8\u4f5c\u8005"}))}}]),t}(a.Component),st=Object(i.b)(function(e){return{recAuthors:rt(e),hotAuthors:ct(e),isFetching:ot(e)}},function(e){return{actions:Object(f.b)(et,e)}})(ut),lt=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.author;return r.a.createElement("div",null,r.a.createElement("div",{id:"profile-panel"},r.a.createElement(Y.a,{src:e.large_avatar,shape:"circle",icon:"user",size:"large"}),r.a.createElement("p",null,e.name),r.a.createElement("p",null,"\u7b7e\u540d\uff1a",e.alt)),r.a.createElement("p",{id:"resume"},"\u7b80\u4ecb\uff1a",e.resume))}}]),t}(a.Component),mt=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.loadAuthorPosts()}},{key:"render",value:function(){var e=this.props.posts;return r.a.createElement("div",null,r.a.createElement(V.a,{header:r.a.createElement("div",null,"\u53d1\u8868\u7684\u6587\u7ae0"),dataSource:e,itemLayout:"horizontal",renderItem:function(e){return r.a.createElement(V.a.Item,{key:e.id},r.a.createElement(V.a.Item.Meta,{title:e.title}),r.a.createElement("div",null,r.a.createElement(G.a,{type:"heart"}),"\xa0",e.like_count))}}))}}]),t}(a.Component),ht=(n(265),"FETCH_AUTHOR_POSTS_REQUEST"),dt="FETCH_AUTHOR_POSTS_SUCCESS",pt="FETCH_AUTHOR_POSTS_FAILURE",ft="SET_AUTHORID",bt={setAuthorID:function(e){return{type:ft,authorId:e}},loadAuthorPosts:function(){return function(e,t){var n=C(t().authorInfo.authorId);return e(Et(n))}}},Et=function(e){return Object(E.a)({},"FETCH_DATA",{requestURL:e,schema:Z,types:[ht,dt,pt]})},Ot={isFetching:!1,postIds:[],authorId:""},jt=function(e){return e.authorInfo.postIds.map(function(t){return e.entities.articles[t]})},gt=function(e){return e.entities.authors[e.authorInfo.authorId]},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht:return Object(b.a)({},e,{isFetching:!0});case dt:return Object(b.a)({},e,{isFetching:!1,postIds:t.data.ids});case pt:return Object(b.a)({},e,{isFetching:!1});case ft:return Object(b.a)({},e,{authorId:t.authorId});default:return e}},yt=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this.props;(0,e.actions.setAuthorID)(e.match.params.authorId)}},{key:"render",value:function(){var e=this.props,t=e.authorInfo,n=e.authorPosts,a=e.actions.loadAuthorPosts;return r.a.createElement("div",{id:"authorProfile"},r.a.createElement(B,{title:"\u4f5c\u8005\u8be6\u60c5",type:"arrow-left"}),t?r.a.createElement(lt,{author:t}):"",r.a.createElement(mt,{posts:n,loadAuthorPosts:a}))}}]),t}(a.Component),It=Object(i.b)(function(e){return{authorInfo:gt(e),authorPosts:jt(e)}},function(e){return{actions:Object(f.b)(bt,e)}})(yt),At="LOGIN_REQUEST",Ct="LOGIN_SUCCESS",Tt="LOGIN_FAILURE",_t="LOGOUT",St={username:"",password:"",likeIds:{}},Ft={login:function(e,t){return function(n,a){return n({type:At}),new Promise(function(a,r){setTimeout(function(){localStorage.getItem(e)||(St.username=e,St.password=t,localStorage.setItem(e,JSON.stringify(St))),localStorage.setItem("user",e),localStorage.setItem("isLogin",!0),n({type:Ct}),a()},1e3)})}},logout:function(){return localStorage.removeItem("user"),localStorage.removeItem("isLogin"),{type:_t}}},Lt={isFetching:!1,isLogin:localStorage.getItem("isLogin")||!1,username:localStorage.getItem("user")||""},kt=function(e){return e.login.isLogin},wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt;switch((arguments.length>1?arguments[1]:void 0).type){case At:return Object(b.a)({},e,{isFetching:!0});case Ct:return Object(b.a)({},e,{isLogin:!0,isFetching:!1});case Tt:return Object(b.a)({},e,{isFetching:!1});case _t:return Object(b.a)({},e,{isLogin:!1,username:""});default:return e}},Dt=(n(133),n(70)),Rt=(n(266),n(77)),Ut=(n(132),n(131)),Ht=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault();var t=document.getElementById("username").value,a=document.getElementById("password").value;n.props.onSubmit(t,a)},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(Rt.a,{onSubmit:this.handleSubmit,style:{textAlign:"center",margin:"10%"}},r.a.createElement(Rt.a.Item,null,r.a.createElement(Ut.a,{id:"username",prefix:r.a.createElement(G.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"})),r.a.createElement(Rt.a.Item,null,r.a.createElement(Ut.a,{id:"password",prefix:r.a.createElement(G.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),r.a.createElement(Rt.a.Item,null,r.a.createElement(Dt.a,{type:"primary",htmlType:"submit",style:{width:"100%",backgroundColor:"#21BBA6"}},"\u767b\u5f55")))}}]),t}(a.Component),Nt=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isLogin,n=e.actions.login,a=e.location.state;return t?a&&a.from?r.a.createElement(p.a,{to:a.from}):r.a.createElement(p.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement(B,{title:"\u7528\u6237\u767b\u5f55",type:"arrow-left"}),r.a.createElement(Ht,{onSubmit:n}))}}]),t}(a.Component),Mt=Object(i.b)(function(e){return{isLogin:kt(e)}},function(e){return{actions:Object(f.b)(Ft,e)}})(Nt),Pt=n(162),qt=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.component,n=e.isLogin,a=Object(Pt.a)(e,["component","isLogin"]);return r.a.createElement(p.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(p.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}}]),t}(a.Component),Qt=Object(i.b)(function(e){return{isLogin:kt(e)}},null)(qt),Yt=(n(347),function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/column",component:K}),r.a.createElement(p.b,{path:"/login",component:Mt}),r.a.createElement(p.b,{path:"/historyArticles",component:Oe}),r.a.createElement(p.b,{path:"/columnArticle/:columnId",component:ye}),r.a.createElement(p.b,{path:"/artileDetail/:postId",component:Ge}),r.a.createElement(p.b,{path:"/hotAuthors",component:st}),r.a.createElement(p.b,{path:"/authorProfile/:authorId",component:It}),r.a.createElement(Qt,{path:"/like",component:ge}),r.a.createElement(p.b,{path:"/",component:be})))}}]),t}(a.Component)),zt=n(163),Gt=Object(f.c)({articles:$,columns:w,comments:Te,authors:Be}),Jt=Object(f.c)({entities:Gt,showArticles:pe,showColumns:q,hotAuthors:it,details:Ye,login:wt,authorInfo:vt}),xt=Object(f.d)(Jt,Object(f.a)(zt.a,function(e){return function(e){return function(t){var n=t.FETCH_DATA;if(void 0===n)return e(t);var a=n.requestURL,r=n.types,c=n.schema;if("string"!==typeof a)return new Error("\u8bf7\u6c42URL\u5fc5\u987b\u4e3astring\u7c7b\u578b");if(!Array.isArray(r)||3!==r.length)return new Error("\u9700\u6307\u5b9a\u5305\u542b3\u4e2aaction type\u7684\u6570\u7ec4");if(!r.every(function(e){return"string"===typeof e}))return new Error("action type \u5fc5\u9700\u4e3astring\u7c7b\u578b");if(!c)return new Error("\u5fc5\u9700\u6307\u5b9a\u9886\u57df\u5b9e\u4f53\u7684schema");var o=function(e){return delete t.FETCH_DATA,Object(b.a)({},t,e)},i=Object(T.a)(r,3),u=i[0],s=i[1],l=i[2];return e(o({type:u})),F(a,c).then(function(t){e(o({type:s,data:t}))},function(t){e(o({type:l,error:t.message||"\u83b7\u53d6\u6570\u636e\u5931\u8d25"}))})}}}));o.a.render(r.a.createElement(i.a,{store:xt},r.a.createElement(Yt,null)),document.getElementById("root"))}},[[170,1,2]]]);
//# sourceMappingURL=main.ad4f04fd.chunk.js.map